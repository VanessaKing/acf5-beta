var acf_field_group={};(function(e){function t(e){var t=e.find('.acf-field[data-name="ui"] input:checked').val(),n=e.find('.acf-field[data-name="multiple"] input:checked').val();n=="1"?e.find('.acf-field[data-name="sortable"]').show():e.find('.acf-field[data-name="sortable"]').hide();t=="1"?e.find('.acf-field[data-name="search"], .acf-field[data-name="ajax"]').show():e.find('.acf-field[data-name="search"], .acf-field[data-name="ajax"], .acf-field[data-name="sortable"]').hide()}function n(e){var t=e.find('.acf-field[data-name="multiple"] input:checked').val();t=="1"?e.find('.acf-field[data-name="sortable"]').show():e.find('.acf-field[data-name="sortable"]').hide()}e(document).on("submit","#post",function(){var t=e("#titlewrap #title");if(!t.val()){alert(acf.l10n.title);t.focus();return!1}});e(document).on("click","#submit-delete",function(){var e=confirm(acf.l10n.move_to_trash);if(!e)return!1});e(document).on("ready",function(){e("#submitdiv, #acf-field-group-fields, #acf-field-group-locations, #acf-field-group-options").addClass("acf-postbox no-padding");e("#acf-field-group-fields").addClass("seamless");e("#submitdiv #publish").attr("class","acf-button blue large");e("#submitdiv a.submitdelete").attr("class","delete-field-group").attr("id","submit-delete");acf_field_group.fields.init();acf_field_group.location.init();acf_field_group.conditional_logic.init();acf_field_group.options.init()});acf_field_group.fields={$el:null,init:function(){var t=this;this.$el=e("#acf-field-group-fields");this.$el.find(".acf-field-list").sortable({connectWith:".acf-field-list",update:function(e,n){var r=n.item;t.render();acf.do_action("sortstop",r)},handle:".acf-icon"});this.$el.on("click",".edit-field",function(n){n.preventDefault();t.edit(e(this).closest(".field"))});this.$el.on("click",".delete-field",function(n){n.preventDefault();t.remove(e(this).closest(".field"))});this.$el.on("click",".acf-add-field",function(n){n.preventDefault();t.add(e(this).closest(".acf-field-list-wrap").children(".acf-field-list"))});this.$el.on("change",'tr[data-name="type"] select',function(){t.change_type(e(this))});this.$el.on("change",'tr[data-name="label"] input',function(n){t.change_label(e(this).closest(".field"))});this.$el.on("keyup",'tr[data-name="label"] input, tr[data-name="name"] input',function(n){t.render_field(e(this).closest(".field"))})},render_field:function(e){var t=e.find('tr[data-name="label"] input').val(),n=e.find('tr[data-name="name"] input').val(),r=e.attr("data-type");e.find("> .acf-tbody > .li-field_label > strong > a").text(t);e.find("> .acf-tbody > .li-field_name").text(n);e.find("> .acf-tbody > .li-field_type").text(r)},edit:function(e){if(e.hasClass("open")){e.removeClass("open");acf.do_action("close",e)}else{e.addClass("open");acf.do_action("open",e)}e.find("> .acf-hidden > .input-changed").val(1);e.children(".field-options").animate({height:"toggle"},250)},change_type:function(t){var n=t.closest("tbody"),r=n.closest(".field"),i=r.attr("data-type"),s=t.val();r.removeClass("field_type-"+i).addClass("field_type-"+s).attr("data-type",s);(s=="tab"||s=="message")&&n.find('tr[data-name="name"] input').val("").trigger("keyup");n.children("tr[data-option]").hide().find("[name]").attr("disabled","true");this.render_field(t.closest(".field"));if(n.children('tr[data-option="'+s+'"]').exists()){n.children('tr[data-option="'+s+'"]').show().find("[name]").removeAttr("disabled");acf.do_action("change",r)}else{var o=e('<tr class="acf-field"><td class="acf-label"></td><td class="acf-input"><div class="acf-loading"></div></td></tr>');n.children(".field_save").before(o);var u={action:"acf/field_group/render_field_options",nonce:acf.o.nonce,post_id:acf.o.post_id,prefix:t.attr("name").replace("[type]",""),type:s};e.ajax({url:acf.o.ajaxurl,data:u,type:"post",dataType:"html",success:function(t){if(!t){o.remove();return}var n=e(t);o.replaceWith(n);acf.do_action("append",n);acf.do_action("change",r)}})}},add:function(e){var t=e.children('.field[data-key="acfcloneindex"]').clone();this.wipe_field(t);t.show();e.children('.field[data-key="acfcloneindex"]').before(t);e.children(".no-fields-message").hide();t.find(".field-options .tr-field-type:first select").trigger("change");t.find('.field-options input[type="text"]').val("");setTimeout(function(){t.find('.field_form input[type="text"]:first').focus()},251);this.render();acf.do_action("append",t);this.edit(t)},remove:function(t){var n=this,r=t.attr("data-ID");r&&e("#input-delete-fields").val(e("#input-delete-fields").val()+"|"+r);var i=t.closest(".acf-field-list");t.css({height:t.height(),width:t.width(),position:"absolute"});t.wrap('<div class="temp-field-wrap" style="height:'+t.height()+'px"></div>');t.animate({opacity:0},250);var s=0;i.children(".field").length==1&&(s=i.children(".no-fields-message").height());t.parent(".temp-field-wrap").animate({height:s},250,function(){e(this).remove();n.render()})},move:function(){},duplicate:function(){},wipe_field:function(t){var n=t.attr("data-id"),r=acf.get_uniqid("field_");t.attr("data-key",r);t.attr("data-id","");t.find("> .acf-hidden > .input-ID").val("");t.find("> .acf-hidden > .input-key").val(r);t.attr("class",t.attr("class").replace(n,r));t.find('[id*="'+n+'"]').each(function(){e(this).attr("id",e(this).attr("id").replace(n,r))});t.find('[name*="'+n+'"]').each(function(){e(this).attr("name",e(this).attr("name").replace(n,r))})},render:function(){this.$el.find(".acf-field-list").each(function(){e(this).children(".field").each(function(t){e(this).find(".li-field_order:first .acf-icon").html(t+1);e(this).find("> .acf-hidden > .input-changed").val(1);e(this).find("> .acf-hidden > .input-menu_order").val(t)})})},change_label:function(t){var n=t.find('tr[data-name="label"] input'),r=t.find('tr[data-name="name"] input'),i=t.attr("data-type");if(i=="tab"||i=="message"){r.val("").trigger("change");return}if(r.val()==""){var s=n.val(),o={"ä":"a","æ":"a","å":"a","ö":"o","ø":"o","é":"e","ë":"e","ü":"u","ó":"o","ő":"o","ú":"u","é":"e","á":"a","ű":"u","í":"i"," ":"_","'":""};e.each(o,function(e,t){var n=new RegExp(e,"g");s=s.replace(n,t)});s=s.toLowerCase();r.val(s).trigger("change")}this.render_field(t)}};acf_field_group.options={$el:null,init:function(){this.$el=e("#acf-field-group-options");var t=this.$el.find(".tr-hide-on-screen ul.acf-checkbox-list"),n=e('<li><label><input type="checkbox" value="" name="" >'+acf.l10n.hide_show_all+"</label></li>");t.find("input:not(:checked)").length==0&&n.find("input").attr("checked","checked");n.on("change","input",function(){var n=e(this).is(":checked");t.find("input").attr("checked",n)});t.prepend(n)}};acf_field_group.location={$el:null,init:function(){var t=this;t.$el=e("#acf-field-group-locations");t.$el.on("click",".location-add-rule",function(n){n.preventDefault();t.add_rule(e(this).closest("tr"))});t.$el.on("click",".location-remove-rule",function(n){n.preventDefault();t.remove_rule(e(this).closest("tr"))});t.$el.on("click",".location-add-group",function(e){e.preventDefault();t.add_group()});t.$el.on("change",".param select",function(){var t=e(this).closest("tr"),n=t.attr("data-id"),r=t.closest(".location-group"),i=r.attr("data-id"),s={action:"acf/field_group/render_location_value",nonce:acf.o.nonce,rule_id:n,group_id:i,value:"",param:e(this).val()},o=e('<div class="acf-loading"></div>');t.find("td.value").html(o);e.ajax({url:acf.o.ajaxurl,data:s,type:"post",dataType:"html",success:function(e){o.replaceWith(e)}})})},add_rule:function(t){var n=t.clone(),r=n.attr("data-id"),i=acf.get_uniqid();n.find("[name]").each(function(){e(this).attr("name",e(this).attr("name").replace(r,i));e(this).attr("id",e(this).attr("id").replace(r,i))});n.attr("data-id",i);t.after(n);return!1},remove_rule:function(e){var t=e.siblings("tr").length;t==0?this.remove_group(e.closest(".location-group")):e.remove()},add_group:function(){var t=this.$el.find(".location-group:last"),n=t.clone(),r=n.attr("data-id"),i=acf.get_uniqid();n.find("[name]").each(function(){e(this).attr("name",e(this).attr("name").replace(r,i));e(this).attr("id",e(this).attr("id").replace(r,i))});n.attr("data-id",i);n.find("h4").text(acf.l10n.or);n.find("tr:not(:first)").remove();t.after(n)},remove_group:function(e){e.remove()}};acf_field_group.conditional_logic={$el:null,init:function(){this.$el=acf_field_group.fields.$el;var t=this;acf.add_action("open",function(e){t.render(e)});this.$el.on("change",'tr[data-name="label"] input',function(){t.$el.find(".field.open").each(function(){t.render(e(this))})});this.$el.on("change",'tr.conditional-logic input[type="radio"]',function(n){n.preventDefault();t.change_toggle(e(this))});this.$el.on("change","select.conditional-logic-field",function(n){n.preventDefault();t.change_trigger(e(this))});this.$el.on("click","tr.conditional-logic .acf-button-add",function(n){n.preventDefault();t.add(e(this).closest("tr"))});this.$el.on("click","tr.conditional-logic .acf-button-remove",function(n){n.preventDefault();t.remove(e(this).closest("tr"))})},render:function(t){var n=this,r=[],i=t.attr("data-id"),s=t.parents(".fields"),o=t.find("> .field_form_mask > .field_form > table > tbody > tr.conditional-logic");e.each(s,function(t){var n=t==0?acf.l10n.sibling_fields:acf.l10n.parent_fields;e(this).children(".field").each(function(){var t=e(this),s=t.attr("data-id"),o=t.attr("data-type"),u=t.find("tr.field_label input").val();if(s=="field_clone")return;if(s==i)return;(o=="select"||o=="checkbox"||o=="true_false"||o=="radio")&&r.push({value:s,label:u,group:n})})});r.length==0&&r.push({value:"null",label:acf.l10n.no_fields});o.find(".conditional-logic-field").each(function(){var t=e(this).val(),n=e(this).attr("name"),i=acf.helpers.create_field({type:"select",classname:"conditional-logic-field",name:n,value:t,choices:r});e(this).replaceWith(i);i.trigger("change")})},change_toggle:function(e){var t=e.val(),n=e.closest("tr.conditional-logic");t=="1"?n.find(".contional-logic-rules-wrapper").show():n.find(".contional-logic-rules-wrapper").hide()},change_trigger:function(t){var n=t.val(),r=e(".field_key-"+n),i=r.attr("data-type"),s=t.closest("tr").find(".conditional-logic-value"),o=[];if(i=="true_false")o=[{value:1,label:acf.l10n.checked}];else if(i=="select"||i=="checkbox"||i=="radio"){var u=r.find(".field_option-choices").val().split("\n");if(u)for(var a=0;a<u.length;a++){var f=u[a].split(":"),l=f[0];f[1]&&(l=f[1]);o.push({value:e.trim(f[0]),label:e.trim(l)})}}var t=acf.helpers.create_field({type:"select",classname:"conditional-logic-value",name:s.attr("name"),value:s.val(),choices:o});s.replaceWith(t);t.trigger("change")},add:function(t){var n=t.clone(),r=parseFloat(t.attr("data-i")),i=r+1;n.find("[name]").each(function(){var t="[conditional_logic][rules]["+r+"]",n="[conditional_logic][rules]["+i+"]";e(this).attr("name",e(this).attr("name").replace(t,n));e(this).attr("id",e(this).attr("id").replace(t,n))});n.attr("data-i",i);t.after(n);t.closest("table").removeClass("remove-disabled")},remove:function(e){var t=e.closest("table");if(t.hasClass("remove-disabled"))return!1;e.remove();t.find("tr").length<=1&&t.addClass("remove-disabled")}};acf.add_action("open",function(e){e.attr("data-type")=="select"&&t(e)});e(document).on("change",'.field[data-type="select"] input[type="radio"]',function(){t(e(this).closest(".field"))});acf.add_action("open change",function(e){e.attr("data-type")=="post_object"&&n(e)});e(document).on("change",'.field[data-type="post_object"] input[type="radio"]',function(){n(e(this).closest(".field"))});e(document).on("change",".radio-option-other_choice input",function(){var t=e(this),n=t.closest("td");if(t.is(":checked"))n.find(".radio-option-save_other_choice").show();else{n.find(".radio-option-save_other_choice").hide();n.find(".radio-option-save_other_choice input").removeAttr("checked")}});acf.add_action("open change",function(e){if(e.attr("data-type")!="google_map")return;$lat=e.find('tr[data-name="center_lat"]');$lng=e.find('tr[data-name="center_lng"]');tmpl='<ul class="acf-hl"><li style="width:48%;">$lat</li><li style="width:48%; margin-left:4%;">$lng</li></ul>';if(!$lng.exists())return;tmpl=tmpl.replace("$lat",$lat.find(".acf-input").html());tmpl=tmpl.replace("$lng",$lng.find(".acf-input").html());$lat.find(".acf-input").html(tmpl);$lng.remove()})})(jQuery);