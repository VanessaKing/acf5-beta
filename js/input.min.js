/* **********************************************
     Begin acf.js
********************************************** *//*
*  input.js
*
*  All javascript needed for ACF to work
*
*  @type	awesome
*  @date	1/08/13
*
*  @param	N/A
*  @return	N/A
*/var acf={l10n:null,o:null,update:null,get:null,_e:null,on:null,trigger:null,helpers:{get_atts:null,version_compare:null,uniqid:null,sortable:null,add_message:null,is_clone_field:null,url_to_object:null,remove_tr:null},validation:null,conditional_logic:null,media:null,fields:{date_picker:null,color_picker:null,image:null,file:null,wysiwyg:null,gallery:null,relationship:null}};(function(e){e.extend(acf,{update:function(e,t){this.o[e]=t},get:function(e){return this.o[e]||null},on:function(t,n){e(this).on(t,n)},trigger:function(t,n){e(this).trigger(t,n)},_e:function(e,t){t=t||!1;var n=this.l10n[e]||!1;t&&(n=n[t]||!1);return n||""}});e.extend(acf.helpers,{remove_tr:function(e,t){var n=e.height(),r=e.children().length;e.addClass("acf-remove-element");setTimeout(function(){e.removeClass("acf-remove-element");e.html('<td style="padding:0; height:'+n+'px" colspan="'+r+'"></td>');e.children("td").animate({height:0},250,function(){e.remove();t()})},250)}});acf.helpers.isset=function(){var e=arguments,t=e.length,n=0,r;if(t===0)throw new Error("Empty isset");while(n!==t){if(e[n]===r||e[n]===null)return!1;n++}return!0};acf.helpers.get_atts=function(t){var n={};e.each(t[0].attributes,function(t,r){if(r.name.substr(0,5)=="data-"){var i=r.value,s=r.name.replace("data-","");e.isNumeric(i)&&(i=parseInt(i));n[s]=i}});return n};acf.helpers.version_compare=function(e,t){if(typeof e+typeof t!="stringstring")return!1;var n=e.split("."),r=t.split("."),i=0,s=Math.max(n.length,r.length);for(;i<s;i++){if(n[i]&&!r[i]&&parseInt(n[i])>0||parseInt(n[i])>parseInt(r[i]))return 1;if(r[i]&&!n[i]&&parseInt(r[i])>0||parseInt(n[i])<parseInt(r[i]))return-1}return 0};acf.helpers.uniqid=function(){var e=new Date;return e.getTime()};acf.helpers.url_to_object=function(e){var t={},n=e.split("&");for(i in n){var r=n[i].split("=");t[decodeURIComponent(r[0])]=decodeURIComponent(r[1])}return t};acf.helpers.sortable=function(t,n){n.children().each(function(){e(this).width(e(this).width())});return n};acf.helpers.is_clone_field=function(e){return e.attr("name")&&e.attr("name").indexOf("[acfcloneindex]")!=-1?!0:!1};acf.helpers.add_message=function(t,n){var t=e('<div class="acf-message-wrapper"><div class="message updated"><p>'+t+"</p></div></div>");n.prepend(t);setTimeout(function(){t.animate({opacity:0},250,function(){t.remove()})},1500)};e.fn.exists=function(){return e(this).length>0};acf.media={div:null,frame:null,render_timout:null,clear_frame:function(){if(!this.frame)return;this.frame.detach();this.frame.dispose();this.frame=null},type:function(){var e="thickbox";typeof wp=="object"&&(e="backbone");return e},init:function(){if(typeof wp.media=="undefined")return!1;var t=wp.media.view.AttachmentCompat.prototype;t.orig_render=t.render;t.orig_dispose=t.dispose;t.className="compat-item acf_postbox no_box";t.render=function(){var t=this;if(t.ignore_render)return this;this.orig_render();setTimeout(function(){var n=t.$el.closest(".media-modal");if(n.hasClass("acf-media-modal"))return;if(n.find(".media-frame-router .acf-expand-details").exists())return;var r=e(['<a href="#" class="acf-expand-details">','<span class="icon"></span>','<span class="is-closed">'+acf.l10n.core.expand_details+"</span>",'<span class="is-open">'+acf.l10n.core.collapse_details+"</span>","</a>"].join(""));r.on("click",function(e){e.preventDefault();n.hasClass("acf-expanded")?n.removeClass("acf-expanded"):n.addClass("acf-expanded")});n.find(".media-frame-router").append(r)},0);clearTimeout(acf.media.render_timout);acf.media.render_timout=setTimeout(function(){e(document).trigger("acf/setup_fields",[t.$el])},50);return this};t.dispose=function(){e(document).trigger("acf/remove_fields",[this.$el]);this.orig_dispose()};t.save=function(e){var t={},n={};e&&e.preventDefault();_.each(this.$el.serializeArray(),function(e){if(e.name.slice(-2)==="[]"){e.name=e.name.replace("[]","");typeof n[e.name]=="undefined"&&(n[e.name]=-1);n[e.name]++;e.name+="["+n[e.name]+"]"}t[e.name]=e.value});this.ignore_render=!0;this.model.saveCompat(t)}}};acf.conditional_logic={items:[],init:function(){var t=this;e(document).on("change",".field input, .field textarea, .field select",function(){e("#acf-has-changed").exists()&&e("#acf-has-changed").val(1);t.change()});t.change()},change:function(){var t=this;e.each(this.items,function(n,r){var i=e(".field_key-"+r.field);i.each(function(){var n=!0;r.allorany=="any"&&(n=!1);var i=e(this),s=!0;e.each(r.rules,function(o,u){var a=e(".field_key-"+u.field);if(a.hasClass("sub_field")){a=i.siblings(".field_key-"+u.field);s=!1;if(!a.exists()){a=i.parents(".row").last().find(".field_key-"+u.field);s=!0}}var f=t.calculate(u,a,i);if(r.allorany=="all"){if(f==0){n=!1;return!1}}else if(f==1){n=!0;return!1}});i.removeClass("acf-conditional_logic-hide acf-conditional_logic-show acf-show-blank");if(n){i.find("input, textarea, select").removeAttr("disabled");i.addClass("acf-conditional_logic-show");e(document).trigger("acf/conditional_logic/show",[i,r])}else{i.find("input, textarea, select").attr("disabled","disabled");i.addClass("acf-conditional_logic-hide");s||i.addClass("acf-show-blank");e(document).trigger("acf/conditional_logic/hide",[i,r])}})})},calculate:function(t,n,r){var i=!1;if(n.hasClass("field_type-true_false")||n.hasClass("field_type-checkbox")||n.hasClass("field_type-radio")){var s=n.find('input[value="'+t.value+'"]:checked').exists();t.operator=="=="?s&&(i=!0):s||(i=!0)}else{var o=n.find("input, textarea, select").last().val();e.isArray(o)||(o=[o]);t.operator=="=="?e.inArray(t.value,o)>-1&&(i=!0):e.inArray(t.value,o)<0&&(i=!0)}return i}};e(document).ready(function(){acf.trigger("ready",[e(document)]);acf.conditional_logic.init()});e(window).load(function(){acf.trigger("load",[e(document)]);acf.media.init();setTimeout(function(){try{e.isNumeric(acf.o.post_id)&&(wp.media.view.settings.post.id=acf.o.post_id)}catch(t){}},10)})})(jQuery);(function(e){acf.ajax={o:{action:"acf/post/get_field_groups",post_id:0,page_template:0,page_parent:0,page_type:0,post_category:0,post_format:0,post_taxonomy:0,lang:0,nonce:0},update:function(e,t){this.o[e]=t;return this},get:function(e){return this.o[e]||null},init:function(){if(!acf.get("ajax"))return!1;this.update("post_id",acf.o.post_id);this.update("nonce",acf.o.nonce);if(e("#icl-als-first").length>0){var t=e("#icl-als-first").children("a").attr("href"),n=new RegExp("lang=([^&#]*)"),r=n.exec(t);this.update("lang",r[1])}this.add_events()},fetch:function(){var t=this;e.ajax({url:acf.get("ajaxurl"),data:this.o,type:"post",dataType:"json",success:function(e){_.isObject(e)&&t.render(e)}})},render:function(t){e(".acf-postbox").addClass("acf-hidden");e(".acf-postbox-toggle").addClass("acf-hidden");e.each(t,function(t,n){var r=e("#acf-"+n.ID),i=e('#adv-settings .acf_postbox-toggle[for="acf-'+n.ID+'-hide"]');r.removeClass("acf-hidden hide-if-js");i.removeClass("acf-hidden");i.find('input[type="checkbox"]').attr("checked","checked");r.find(".acf-replace-with-fields").each(function(){e(this).replaceWith(n.html);e(document).trigger("acf/setup_fields",[r])});t===0&&e("#acf-style").html(n.style)})},add_events:function(){var t=this;e(document).on("change","#page_template",function(){var n=e(this).val();t.update("page_template",n).fetch()});e(document).on("change","#parent_id",function(){var n="parent",r=0;if(val!=""){n="child";r=e(this).val()}t.update("page_type",n).update("page_parent",r).fetch()});e(document).on("change",'#post-formats-select input[type="radio"]',function(){var n=e(this).val();n=="0"&&(n="standard");t.update("post_format",n).fetch()});e(document).on("change",'.categorychecklist input[type="checkbox"]',function(){if(e(this).closest(".categorychecklist").hasClass("no-ajax"))return;setTimeout(function(){var n=[];e('.categorychecklist input[type="checkbox"]:checked').each(function(){if(e(this).is(":hidden")||e(this).is(":disabled"))return;e.inArray(e(this).val(),n)<0&&n.push(e(this).val())});t.update("post_taxonomy",n).fetch()},1)})}};e(document).ready(function(){acf.ajax.init()})})(jQuery);(function(e){var t=acf.fields.color_picker={$el:null,$input:null,set:function(t){e.extend(this,t);this.$input=this.$el.find('input[type="text"]');return this},init:function(){if(acf.helpers.is_clone_field(this.$input))return;this.$input.wpColorPicker()}};e(document).on("acf/setup_fields",function(n,r){e(r).find(".acf-color_picker").each(function(){t.set({$el:e(this)}).init()})})})(jQuery);(function(e){acf.fields.date_picker={$el:null,$input:null,$hidden:null,o:{},set:function(t){e.extend(this,t);this.$input=this.$el.find('input[type="text"]');this.$hidden=this.$el.find('input[type="hidden"]');this.o=acf.helpers.get_atts(this.$el);return this},init:function(){if(acf.helpers.is_clone_field(this.$hidden))return;this.$input.val(this.$hidden.val());var t=e.extend({},acf.l10n.date_picker,{dateFormat:this.o.save_format,altField:this.$hidden,altFormat:this.o.save_format,changeYear:!0,yearRange:"-100:+100",changeMonth:!0,showButtonPanel:!0,firstDay:this.o.first_day});this.$input.addClass("active").datepicker(t);this.$input.datepicker("option","dateFormat",this.o.display_format);e("body > #ui-datepicker-div").length>0&&e("#ui-datepicker-div").wrap('<div class="ui-acf" />')},blur:function(){this.$input.val()||this.$hidden.val("")}};e(document).on("acf/setup_fields",function(t,n){e(n).find(".acf-date_picker").each(function(){acf.fields.date_picker.set({$el:e(this)}).init()})});e(document).on("blur",'.acf-date_picker input[type="text"]',function(t){acf.fields.date_picker.set({$el:e(this).parent()}).blur()})})(jQuery);(function(e){var t=acf.media;acf.fields.file={$el:null,$input:null,o:{},set:function(t){e.extend(this,t);this.$input=this.$el.find('input[type="hidden"]');this.o=acf.helpers.get_atts(this.$el);this.o.multiple=this.$el.closest(".repeater").exists()?!0:!1;this.o.query={};this.o.library=="uploadedTo"&&(this.o.query.uploadedTo=acf.o.post_id);return this},init:function(){if(acf.helpers.is_clone_field(this.$input))return},add:function(e){var n=t.div;n.find(".acf-file-icon").attr("src",e.icon);n.find(".acf-file-title").text(e.title);n.find(".acf-file-name").text(e.name).attr("href",e.url);n.find(".acf-file-size").text(e.size);n.find(".acf-file-value").val(e.id).trigger("change");n.addClass("active");n.closest(".field").removeClass("error")},edit:function(){var n=this.$input.val();t.div=this.$el;t.clear_frame();t.frame=wp.media({title:acf.l10n.file.edit,multiple:!1,button:{text:acf.l10n.file.update}});t.frame.on("open",function(){t.frame.content._mode!="browse"&&t.frame.content.mode("browse");t.frame.$el.closest(".media-modal").addClass("acf-media-modal acf-expanded");var r=t.frame.state().get("selection"),i=wp.media.attachment(n);e.isEmptyObject(i.changed)&&i.fetch();r.add(i)});t.frame.on("close",function(){t.frame.$el.closest(".media-modal").removeClass("acf-media-modal")});acf.media.frame.open()},remove:function(){this.$el.find(".acf-file-icon").attr("src","");this.$el.find(".acf-file-title").text("");this.$el.find(".acf-file-name").text("").attr("href","");this.$el.find(".acf-file-size").text("");this.$el.find(".acf-file-value").val("").trigger("change");this.$el.removeClass("active")},popup:function(){var n=this;t.div=this.$el;t.clear_frame();t.frame=wp.media({states:[new wp.media.controller.Library({library:wp.media.query(n.o.query),multiple:n.o.multiple,title:acf.l10n.file.select,priority:20,filterable:"all"})]});acf.media.frame.on("content:activate",function(){var t=null,r=null;try{t=acf.media.frame.content.get().toolbar;r=t.get("filters")}catch(i){}if(!r)return!1;if(n.o.library=="uploadedTo"){r.$el.find('option[value="uploaded"]').remove();r.$el.after("<span>"+acf.l10n.file.uploadedTo+"</span>");e.each(r.filters,function(e,t){t.props.uploadedTo=acf.o.post_id})}});acf.media.frame.on("select",function(){selection=t.frame.state().get("selection");if(selection){var e=0;selection.each(function(n){e++;if(e>1){var r=t.div.closest("td"),s=r.closest(".row"),o=s.closest(".repeater"),u=r.attr("data-field_key"),a="td .acf-file-uploader:first";u&&(a='td[data-field_key="'+u+'"] .acf-file-uploader');s.next(".row").exists()||o.find(".add-row-end").trigger("click");t.div=s.next(".row").find(a)}var f={id:n.id,title:n.attributes.title,name:n.attributes.filename,url:n.attributes.url,icon:n.attributes.icon,size:n.attributes.filesize};acf.fields.file.add(f)})}});acf.media.frame.open();return!1}};e(document).on("click",".acf-file-uploader .acf-button-edit",function(t){t.preventDefault();acf.fields.file.set({$el:e(this).closest(".acf-file-uploader")}).edit()});e(document).on("click",".acf-file-uploader .acf-button-delete",function(t){t.preventDefault();acf.fields.file.set({$el:e(this).closest(".acf-file-uploader")}).remove()});e(document).on("click",".acf-file-uploader .add-file",function(t){t.preventDefault();acf.fields.file.set({$el:e(this).closest(".acf-file-uploader")}).popup()})})(jQuery);(function(e){acf.fields.location={$el:null,$input:null,o:{},geocoder:!1,map:!1,maps:{},set:function(t){e.extend(this,t);this.$input=this.$el.find(".value");this.o=acf.helpers.get_atts(this.$el);this.maps[this.o.id]&&(this.map=this.maps[this.o.id]);this.geocoder=new google.maps.Geocoder;return this},init:function(){if(acf.helpers.is_clone_field(this.$input))return;this.render()},render:function(){var e=this,t=this.$el,n={zoom:14,center:new google.maps.LatLng(this.o.lat,this.o.lng),mapTypeId:google.maps.MapTypeId.ROADMAP};this.map=new google.maps.Map(this.$el.find(".canvas")[0],n);var r=new google.maps.places.Autocomplete(this.$el.find(".search")[0]);r.map=this.map;r.bindTo("bounds",this.map);this.map.marker=new google.maps.Marker({draggable:!0,raiseOnDrag:!0,map:this.map});this.map.$el=this.$el;var i=this.$el.find(".input-lat").val(),s=this.$el.find(".input-lng").val();i&&s&&this.update(i,s).center();google.maps.event.addListener(r,"place_changed",function(t){var n=this.map.$el,r=n.find(".search").val();n.find(".input-address").val(r);n.find(".title h4").text(r);var i=this.getPlace();if(i.geometry){var s=i.geometry.location.lat(),o=i.geometry.location.lng();e.set({$el:n}).update(s,o).center()}else e.geocoder.geocode({address:r},function(t,r){if(r!=google.maps.GeocoderStatus.OK){console.log("Geocoder failed due to: "+r);return}if(!t[0]){console.log("No results found");return}i=t[0];var s=i.geometry.location.lat(),o=i.geometry.location.lng();e.set({$el:n}).update(s,o).center()})});google.maps.event.addListener(this.map.marker,"dragend",function(){var t=this.map.$el,n=this.map.marker.getPosition(),r=n.lat(),i=n.lng();e.set({$el:t}).update(r,i).sync()});google.maps.event.addListener(this.map,"click",function(t){var n=this.$el,r=t.latLng.lat(),i=t.latLng.lng();e.set({$el:n}).update(r,i).sync()});this.maps[this.o.id]=this.map},update:function(e,t){var n=new google.maps.LatLng(e,t);this.$el.find(".input-lat").val(e);this.$el.find(".input-lng").val(t).trigger("change");this.map.marker.setPosition(n);this.map.marker.setVisible(!0);this.$el.addClass("active");this.$el.closest(".field").removeClass("error");return this},center:function(){var e=this.map.marker.getPosition(),t=new google.maps.LatLng(e.lat(),e.lng());this.map.setCenter(t)},sync:function(){var e=this.$el,t=this.map.marker.getPosition(),n=new google.maps.LatLng(t.lat(),t.lng());this.geocoder.geocode({latLng:n},function(t,n){if(n!=google.maps.GeocoderStatus.OK){console.log("Geocoder failed due to: "+n);return}if(!t[0]){console.log("No results found");return}var r=t[0];e.find(".title h4").text(r.formatted_address);e.find(".input-address").val(r.formatted_address).trigger("change")});return this},locate:function(){var e=this,t=this.$el;if(!navigator.geolocation){alert(acf.l10n.google_map.browser_support);return this}t.find(".title h4").text(acf.l10n.google_map.locating+"...");t.addClass("active");navigator.geolocation.getCurrentPosition(function(n){var r=n.coords.latitude,i=n.coords.longitude;e.set({$el:t}).update(r,i).sync().center()})},clear:function(){this.$el.removeClass("active");this.$el.find(".search").val("");this.$el.find(".input-address").val("");this.$el.find(".input-lat").val("");this.$el.find(".input-lng").val("");this.map.marker.setVisible(!1)},edit:function(){this.$el.removeClass("active");var e=this.$el.find(".title h4").text();this.$el.find(".search").val(e).focus()}};acf.on("ready append",function(t,n){e(n).find(".acf-google-map").exists()&&(typeof google=="undefined"?e.getScript("https://www.google.com/jsapi",function(){google.load("maps","3",{other_params:"sensor=false&libraries=places",callback:function(){e(n).find(".acf-google-map").each(function(){acf.fields.location.set({$el:e(this)}).init()})}})}):e(n).find(".acf-google-map").each(function(){acf.fields.location.set({$el:e(this)}).init()}))});e(document).on("click",".acf-google-map .acf-sprite-remove",function(t){t.preventDefault();acf.fields.location.set({$el:e(this).closest(".acf-google-map")}).clear();e(this).blur()});e(document).on("click",".acf-google-map .acf-sprite-locate",function(t){t.preventDefault();acf.fields.location.set({$el:e(this).closest(".acf-google-map")}).locate();e(this).blur()});e(document).on("click",".acf-google-map .title h4",function(t){t.preventDefault();acf.fields.location.set({$el:e(this).closest(".acf-google-map")}).edit()});e(document).on("keydown",".acf-google-map .search",function(e){if(e.which==13)return!1});e(document).on("blur",".acf-google-map .search",function(t){var n=e(this).closest(".acf-google-map");n.find(".input-lat").val()&&n.addClass("active")})})(jQuery);(function(e){var t=acf.media;acf.fields.image={$el:null,$input:null,o:{},set:function(t){e.extend(this,t);this.$input=this.$el.find('input[type="hidden"]');this.o=acf.helpers.get_atts(this.$el);this.o.multiple=this.$el.closest(".repeater").exists()?!0:!1;this.o.query={type:"image"};this.o.library=="uploadedTo"&&(this.o.query.uploadedTo=acf.o.post_id);return this},init:function(){if(acf.helpers.is_clone_field(this.$input))return},add:function(e){var n=t.div;n.find(".acf-image-image").attr("src",e.url);n.find(".acf-image-value").val(e.id).trigger("change");n.addClass("active");n.closest(".field").removeClass("error")},edit:function(){var n=this.$input.val();t.div=this.$el;t.clear_frame();t.frame=wp.media({title:acf.l10n.image.edit,multiple:!1,button:{text:acf.l10n.image.update}});t.frame.on("open",function(){t.frame.content._mode!="browse"&&t.frame.content.mode("browse");t.frame.$el.closest(".media-modal").addClass("acf-media-modal acf-expanded");var r=t.frame.state().get("selection"),i=wp.media.attachment(n);e.isEmptyObject(i.changed)&&i.fetch();r.add(i)});t.frame.on("close",function(){t.frame.$el.closest(".media-modal").removeClass("acf-media-modal")});acf.media.frame.open()},remove:function(){this.$el.find(".acf-image-image").attr("src","");this.$el.find(".acf-image-value").val("").trigger("change");this.$el.removeClass("active")},popup:function(){var n=this;t.div=this.$el;t.clear_frame();t.frame=wp.media({states:[new wp.media.controller.Library({library:wp.media.query(n.o.query),multiple:n.o.multiple,title:acf.l10n.image.select,priority:20,filterable:"all"})]});acf.media.frame.on("content:activate",function(){var t=null,r=null;try{t=acf.media.frame.content.get().toolbar;r=t.get("filters")}catch(i){}if(!r)return!1;e.each(r.filters,function(e,t){t.props.type="image"});if(n.o.library=="uploadedTo"){r.$el.find('option[value="uploaded"]').remove();r.$el.after("<span>"+acf.l10n.image.uploadedTo+"</span>");e.each(r.filters,function(e,t){t.props.uploadedTo=acf.o.post_id})}r.$el.find("option").each(function(){var t=e(this).attr("value");if(t=="uploaded"&&n.o.library=="all")return;t.indexOf("image")===-1&&e(this).remove()});r.$el.val("image").trigger("change")});acf.media.frame.on("select",function(){selection=t.frame.state().get("selection");if(selection){var e=0;selection.each(function(r){e++;if(e>1){var s=t.div.closest("td"),o=s.closest(".row"),u=o.closest(".repeater"),a=s.attr("data-field_key"),f="td .acf-image-uploader:first";a&&(f='td[data-field_key="'+a+'"] .acf-image-uploader');o.next(".row").exists()||u.find(".add-row-end").trigger("click");t.div=o.next(".row").find(f)}var l={id:r.id,url:r.attributes.url};r.attributes.sizes&&r.attributes.sizes[n.o.preview_size]&&(l.url=r.attributes.sizes[n.o.preview_size].url);acf.fields.image.add(l)})}});acf.media.frame.open();return!1},text:{title_add:"Select Image",title_edit:"Edit Image"}};e(document).on("click",".acf-image-uploader .acf-button-edit",function(t){t.preventDefault();acf.fields.image.set({$el:e(this).closest(".acf-image-uploader")}).edit()});e(document).on("click",".acf-image-uploader .acf-button-delete",function(t){t.preventDefault();acf.fields.image.set({$el:e(this).closest(".acf-image-uploader")}).remove()});e(document).on("click",".acf-image-uploader .add-image",function(t){t.preventDefault();acf.fields.image.set({$el:e(this).closest(".acf-image-uploader")}).popup()})})(jQuery);(function(e){acf.fields.post_object={$el:null,$select:null,$input:null,o:{},set:function(t){e.extend(this,t);this.$select=this.$el.find("select");this.o=acf.helpers.get_atts(this.$select);return this},init:function(){if(acf.helpers.is_clone_field(this.$select))return;var t=[],n=[];this.$select.find("option:selected").each(function(){t.push({id:e(this).attr("value"),text:e(this).text()});n.push(e(this).attr("value"))});if(this.o.multiple){var r=this.$select.attr("name").replace("[]","");this.$select.attr("name",r)}else t=t[0];var i='<input type="hidden" name="%name%" id="%id%" value="%value%" />';i=i.replace("%name%",this.$select.attr("name"));i=i.replace("%id%",this.$select.attr("id"));i=i.replace("%value%",n.join(","));this.$input=e(i);this.$select.replaceWith(this.$input);var s={action:"acf/fields/post_object/query",field_key:this.$el.attr("data-key"),nonce:acf.get("nonce"),post_id:acf.get("post_id")},o={width:"100%",placeholder:this.o.placeholder,allowClear:1,multiple:this.o.multiple,ajax:{url:acf.get("ajaxurl"),dataType:"json",type:"get",cache:!0,data:function(e,t){s.s=e;return s},results:function(e,t){return{results:e}}},initSelection:function(e,n){n(t)}};this.$input.select2(o);var u=this;this.o.sortable&&this.$input.select2("container").find("ul.select2-choices").sortable({containment:"parent",start:function(){u.$input.select2("onSortStart")},update:function(){u.$input.select2("onSortEnd")}})}};acf.on("ready append",function(t,n){e(n).find(".acf-field.field_type-post_object").each(function(){acf.fields.post_object.set({$el:e(this)}).init()})})})(jQuery);(function(e){acf.fields.radio={$el:null,$input:null,$other:null,set:function(t){e.extend(this,t);this.$input=this.$el.find('input[type="radio"]:checked');this.$other=this.$el.find('input[type="text"]');return this},change:function(){this.$el.find("li").removeClass("active");this.$input.closest("li").addClass("active");if(this.$input.val()=="other"){this.$other.attr("name",this.$input.attr("name"));this.$other.show()}else{this.$other.attr("name","");this.$other.hide()}}};e(document).on("change",'.acf-radio-list input[type="radio"]',function(t){acf.fields.radio.set({$el:e(this).closest(".acf-radio-list")}).change()})})(jQuery);(function(e){acf.fields.relationship={$el:null,$wrap:null,$input:null,$filters:null,$choices:null,$values:null,o:{},set:function(t){e.extend(this,t);this.$wrap=this.$el.find(".acf-relationship");this.$input=this.$wrap.find(".acf-hidden input");this.$choices=this.$wrap.find(".choices"),this.$values=this.$wrap.find(".values");this.o=acf.helpers.get_atts(this.$wrap);return this},init:function(){var e=this;if(acf.helpers.is_clone_field(this.$input))return;this.$values.children(".list").sortable({items:"li",forceHelperSize:!0,forcePlaceholderSize:!0,scroll:!0,update:function(){e.$input.trigger("change")}});this.fetch()},fetch:function(){var t=this,n=this.$el;this.$choices.children(".list").html("<p>"+acf._e("relationship","loading")+"...</p>");var r={action:"acf/fields/relationship/query",field_key:this.$el.attr("data-key"),nonce:acf.get("nonce"),post_id:acf.get("post_id")};e.extend(r,this.o);this.$el.data("xhr")&&this.$el.data("xhr").abort();var i=e.ajax({url:acf.get("ajaxurl"),dataType:"json",type:"get",cache:!0,data:r,success:function(e){t.set({$el:n}).render(e)}});this.$el.data("xhr",i)},render:function(t){var n=this;if(!t||!t.length){this.$choices.children(".list").html("<li><p>"+acf._e("relationship","empty")+"</p></li>");return}this.$choices.children(".list").html(this.walker(t));this.$values.find(".acf-relationship-item").each(function(){var t=e(this).attr("data-id");n.$choices.find('.acf-relationship-item[data-id="'+t+'"]').addClass("disabled")});if(this.o.s){var r=this.o.s;this.$choices.find('.acf-relationship-item:contains("'+r+'")').each(function(){var t=e(this).html().replace(r,'<span class="match">'+r+"</span>");e(this).html(t)})}},walker:function(t){var n="";if(e.isArray(t))for(var r in t)n+=this.walker(t[r]);else if(e.isPlainObject(t))if(t.children!==undefined){n+='<li><span class="acf-relationship-label">'+t.text+'</span><ul class="acf-bl">';n+=this.walker(t.children);n+="</ul></li>"}else n+='<li><span class="acf-relationship-item" data-id="'+t.id+'">'+t.text+"</span></li>";return n},add:function(e){if(this.o.max>0&&this.$values.find(".acf-relationship-item").length>=this.o.max){alert(acf.l10n.relationship.max.replace("{max}",this.o.max));return!1}if(e.hasClass("disabled"))return!1;e.addClass("disabled");var t={value:e.attr("data-id"),text:e.html(),name:this.$input.attr("name")},n=_.template(acf.l10n.relationship.tmpl_li,t);this.$values.children(".list").append(n);this.$input.trigger("change");this.$el.removeClass("error")},remove:function(e){var t=e.attr("data-id");e.parent("li").remove();this.$choices.find('.acf-relationship-item[data-id="'+t+'"]').removeClass("disabled");this.$input.trigger("change")}};acf.on("ready append",function(t,n){e(n).find(".acf-field.field_type-relationship").each(function(){acf.fields.relationship.set({$el:e(this)}).init()})});e(document).on("keypress",".acf-relationship .filters [data-filter]",function(e){e.which==13&&e.preventDefault()});e(document).on("change keyup",".acf-relationship .filters [data-filter]",function(t){var n=e(this).val(),r=e(this).attr("data-filter"),i=e(this).closest(".acf-relationship");$el=i.closest(".acf-field");if(i.attr("data-"+r)==n)return;i.attr("data-"+r,n);acf.fields.relationship.set({$el:$el}).fetch()});e(document).on("click",".acf-relationship .choices .acf-relationship-item",function(t){t.preventDefault();acf.fields.relationship.set({$el:e(this).closest(".acf-field")}).add(e(this));e(this).blur()});e(document).on("click",".acf-relationship .values .acf-icon",function(t){t.preventDefault();acf.fields.relationship.set({$el:e(this).closest(".acf-field")}).remove(e(this).closest(".acf-relationship-item"));e(this).blur()})})(jQuery);(function(e){acf.fields.select={$el:null,$select:null,o:{},set:function(t){e.extend(this,t);this.$select=this.$el.find("select");this.o=acf.helpers.get_atts(this.$select);return this},init:function(){if(acf.helpers.is_clone_field(this.$select))return;if(!this.o.ui)return;var e={width:"100%",allowClear:this.o.allow_null,placeholder:this.o.placeholder};this.o.allow_null&&this.$select.find('option[value=""]').remove();this.$select.select2(e)}};acf.on("ready append",function(t,n){e(n).find(".acf-field.field_type-select").each(function(){acf.fields.select.set({$el:e(this)}).init()})});acf.on("ready append",function(t,n){e(n).find(".acf-field.field_type-user").each(function(){acf.fields.select.set({$el:e(this)}).init()})})})(jQuery);(function(e){e(document).on("acf/setup_fields",function(t,n){if(!e(n).find(".acf-tab").exists())return;e(n).find(".acf-tab").each(function(){var t=e(this),n=t.parent(),r=n.parent(),i=t.attr("data-id"),s=t.html();if(t.hasClass("acf-tab-added"))return;t.addClass("acf-tab-added");r.children(".acf-tab-group").exists()||r.children(".field_type-tab:first").before('<ul class="hl clearfix acf-tab-group"></ul>');r.children(".acf-tab-group").append('<li class="field_key-'+i+'" data-field_key="'+i+'"><a class="acf-tab-button" href="#" data-id="'+i+'">'+s+"</a></li>")});acf.conditional_logic.change();e(n).find(".acf-tab-group").each(function(){e(this).find("li:first a").trigger("click")})});e(document).on("click",".acf-tab-button",function(t){t.preventDefault();var n=e(this),r=n.closest("ul"),i=r.parent(),s=n.attr("data-id");r.find("li").removeClass("active");n.parent("li").addClass("active");i.children(".field_type-tab").each(function(){var t=e(this);t.hasClass("field_key-"+s)?t.nextUntil(".field_type-tab").removeClass("acf-tab_group-hide").addClass("acf-tab_group-show"):t.nextUntil(".field_type-tab").removeClass("acf-tab_group-show").addClass("acf-tab_group-hide")});n.trigger("blur")});e(document).on("acf/conditional_logic/hide",function(e,t,n){setTimeout(function(){t.parent().hasClass("acf-tab-group")&&t.siblings(".acf-conditional_logic-show").first().children("a").trigger("click")},0)})})(jQuery);(function(e){acf.validation={status:!0,disabled:!1,init:function(){this.add_events()},show_error:function(e){e.addClass("error")},remove_error:function(e){e.removeClass("error")},run:function(t){var n=this;this.status=!0;t.find(".acf-field.required").each(function(){n.validate_field(e(this))});return this.status},validate_field:function(t){t.data("validation",!0);if(t.is(":hidden"))return;if(t.hasClass("acf-conditional_logic-hide"))return;if(t.hasClass("acf-tab_group-hide")&&t.prevAll(".field_type-tab:first").hasClass("acf-conditional_logic-hide"))return;t.find('input[type="text"], input[type="email"], input[type="number"], input[type="hidden"], textarea').val()==""&&t.data("validation",!1);if(t.find(".acf_wysiwyg").exists()&&typeof tinyMCE=="object"){t.data("validation",!0);var n=t.find(".wp-editor-area").attr("id"),r=tinyMCE.get(n);r&&!r.getContent()&&t.data("validation",!1)}if(t.find("select").exists()){t.data("validation",!0);(t.find("select").val()=="null"||!t.find("select").val())&&t.data("validation",!1)}if(t.find('input[type="radio"]').exists()){t.data("validation",!1);t.find('input[type="radio"]:checked').exists()&&t.data("validation",!0)}if(t.find('input[type="checkbox"]').exists()){t.data("validation",!1);t.find('input[type="checkbox"]:checked').exists()&&t.data("validation",!0)}if(t.find(".acf_relationship").exists()){t.data("validation",!1);t.find(".acf_relationship .relationship_right input").exists()&&t.data("validation",!0)}if(t.find(".repeater").exists()){t.data("validation",!1);t.find(".repeater tr.row").exists()&&t.data("validation",!0)}if(t.find(".acf_flexible_content").exists()){t.data("validation",!1);t.find(".acf_flexible_content .values table").exists()&&t.data("validation",!0)}if(t.find(".acf-gallery").exists()){t.data("validation",!1);t.find(".acf-gallery .thumbnail").exists()&&t.data("validation",!0)}e(document).trigger("acf/validate_field",[t]);if(!t.data("validation")){this.status=!1;this.show_error(t)}},add_events:function(){var t=this;e(document).on("focus click",".acf-field.required input, .acf-field.required textarea, .acf-field.required select",function(n){t.remove_error(e(this).closest(".acf-field"))});e(document).on("click","#save-post",function(){t.disabled=!0});e(document).on("submit","form",function(){if(t.disabled)return!0;var n=e(this),r=t.run(n);if(r){n.find(".acf-postbox.acf-hidden").remove();return!0}n.children(".acf-validation-error").remove();n.prepend('<div class="acf-validation-error"><p>'+acf.l10n.validation.error+"</p></div>");if(n.attr("id")=="post"){e("#publish").removeClass("button-primary-disabled");e("#ajax-loading").attr("style","");e("#publishing-action .spinner").hide()}return!1})}}})(jQuery);(function(e){var t=acf.fields.wysiwyg={$el:null,$textarea:null,o:{},set:function(t){e.extend(this,t);this.$textarea=this.$el.find("textarea");this.o=acf.helpers.get_atts(this.$el);this.o.id=this.$textarea.attr("id");return this},has_tinymce:function(){var e=!1;typeof tinyMCE=="object"&&(e=!0);return e},init:function(){if(acf.helpers.is_clone_field(this.$textarea))return;var t=e.extend({},tinyMCE.settings);tinyMCE.settings.theme_advanced_buttons1="";tinyMCE.settings.theme_advanced_buttons2="";tinyMCE.settings.theme_advanced_buttons3="";tinyMCE.settings.theme_advanced_buttons4="";acf.helpers.isset(this.toolbars[this.o.toolbar])&&e.each(this.toolbars[this.o.toolbar],function(e,t){tinyMCE.settings[e]=t});tinyMCE.execCommand("mceAddControl",!1,this.o.id);e(document).trigger("acf/wysiwyg/load",this.o.id);this.add_events();tinyMCE.settings=t;wpActiveEditor=null},add_events:function(){var t=this.o.id,n=tinyMCE.get
(t);if(!n)return;var r=e("#wp-"+t+"-wrap"),i=e(n.getBody());r.on("click",function(){e(document).trigger("acf/wysiwyg/click",t)});i.on("focus",function(){e(document).trigger("acf/wysiwyg/focus",t)});i.on("blur",function(){e(document).trigger("acf/wysiwyg/blur",t)})},destroy:function(){var e=this.o.id,t=tinyMCE.get(e);try{tinyMCE.execCommand("mceRemoveControl",!1,e)}catch(n){console.log(n)}wpActiveEditor=null}};e(document).on("acf/setup_fields",function(n,r){if(!t.has_tinymce())return;e(r).find(".acf_wysiwyg").each(function(){t.set({$el:e(this)}).destroy()});setTimeout(function(){e(r).find(".acf_wysiwyg").each(function(){t.set({$el:e(this)}).init()})},0)});e(document).on("acf/remove_fields",function(n,r){if(!t.has_tinymce())return;r.find(".acf_wysiwyg").each(function(){t.set({$el:e(this)}).destroy()})});e(document).on("acf/wysiwyg/click",function(t,n){wpActiveEditor=n;container=e("#wp-"+n+"-wrap").closest(".field").removeClass("error")});e(document).on("acf/wysiwyg/focus",function(t,n){wpActiveEditor=n;container=e("#wp-"+n+"-wrap").closest(".field").removeClass("error")});e(document).on("acf/wysiwyg/blur",function(t,n){wpActiveEditor=null;var r=tinyMCE.get(n);if(!r)return;var i=r.getElement();r.save();e(i).trigger("change")});e(document).on("acf/sortable_start",function(n,r){if(!t.has_tinymce())return;e(r).find(".acf_wysiwyg").each(function(){t.set({$el:e(this)}).destroy()})});e(document).on("acf/sortable_stop",function(n,r){if(!t.has_tinymce())return;e(r).find(".acf_wysiwyg").each(function(){t.set({$el:e(this)}).init()})});e(window).load(function(){if(!t.has_tinymce())return;var n=e("#wp-content-wrap").exists(),r=e("#wp-acf_settings-wrap").exists();mode="tmce";r&&e("#wp-acf_settings-wrap").hasClass("html-active")&&(mode="html");setTimeout(function(){r&&mode=="html"&&e("#acf_settings-tmce").trigger("click")},1);setTimeout(function(){r&&mode=="html"&&e("#acf_settings-html").trigger("click");n&&t.set({$el:e("#wp-content-wrap")}).add_events()},11)});e(document).on("click",".acf_wysiwyg a.mce_fullscreen",function(){var t=e(this).closest(".acf_wysiwyg"),n=t.attr("data-upload");n=="no"&&e("#mce_fullscreen_container td.mceToolbar .mce_add_media").remove()})})(jQuery);